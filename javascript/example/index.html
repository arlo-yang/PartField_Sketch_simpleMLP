<!DOCTYPE html>
<html>
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
        <meta charset="utf-8"/>

        <title>URDF Viewer Example</title>

        <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üéÉ</text></svg>">
        
        <script src="https://unpkg.com/@webcomponents/webcomponentsjs@2.4.3/webcomponents-bundle.js"></script>
        <link href="https://fonts.googleapis.com/css?family=Roboto:100,300" rel="stylesheet"/>
        <link href="./styles.css" type="text/css" rel="stylesheet" />
        <script src="./src/redirect.js"></script>
        <script src="https://unpkg.com/three@0.150.0/examples/js/loaders/PLYLoader.js"></script>
        <script src="https://unpkg.com/urdf-loader@0.10.4/umd/urdf-loader.min.js"></script>
        <style>
            body {
                background-color: #263238 !important;
            }
        </style>
    </head>
    <body tabindex="0">

        <div id="menu">
            <div id="urdf-categories">
                <!-- ÂàÜÁ±ªÂíåÊ®°Âûã‰ºöÈÄöËøá JavaScript Âä®ÊÄÅÊ∑ªÂä† -->
            </div>

            <div id="controls" class="hidden">
                <div id="toggle-controls"></div>
                
                <!-- Axis Control -->
                <div class="default-container">
                    <div id="axes-toggle" class="toggle">Show Axes</div>
                </div>
                
                <!-- View Control -->
                <div class="default-container">
                    <div id="view-toggle" class="toggle">View</div>
                    <select id="view-select" class="state-select">
                        <!-- Â∑¶‰æßËßÜËßí -->
                        <option value="top-left">Top Left</option>
                        <option value="left">Left</option>
                        <option value="bottom-left">Bottom Left</option>
                        
                        <!-- ‰∏≠Èó¥ËßÜËßí -->
                        <option value="top-center">Top Center</option>
                        <option value="center">Center</option>
                        <option value="bottom-center">Bottom Center</option>
                        
                        <!-- Âè≥‰æßËßÜËßí -->
                        <option value="top-right">Top Right</option>
                        <option value="right">Right</option>
                        <option value="bottom-right">Bottom Right</option>
                    </select>
                </div>
                
                <!-- Screenshot Control -->
                <div class="default-container">
                    <div id="screenshot-toggle" class="toggle">Take Screenshot</div>
                </div>

                <!-- Add the gallery control -->
                <div class="default-container">
                    <div id="gallery-toggle" class="toggle">Object Gallery</div>
                </div>
                
                <!-- Separator Line -->
                <div class="separator-line"></div>
                
                <!-- Render Controls -->
                <div class="default-container">
                    <div id="default-render" class="toggle checked">Default</div>
                    <select id="default-state" class="state-select">
                        <option value="close">Close</option>
                        <option value="open">Open</option>
                    </select>
                </div>

                <div class="default-container">
                    <div id="normal-render" class="toggle">Normal Map</div>
                    <select id="normal-state" class="state-select">
                        <option value="close">Close</option>
                        <option value="open">Open</option>
                    </select>
                </div>

                <div class="default-container">
                    <div id="depth-render" class="toggle">Depth Map</div>
                    <select id="depth-state" class="state-select">
                        <option value="close">Close</option>
                        <option value="open">Open</option>
                    </select>
                </div>

                <div class="default-container">
                    <div id="wireframe-render" class="toggle">Wireframe</div>
                    <select id="wireframe-state" class="state-select">
                        <option value="close">Close</option>
                        <option value="open">Open</option>
                    </select>
                </div>

                <div class="default-container">
                    <div id="segmentation-render" class="toggle">Segmentation</div>
                    <select id="segmentation-joint-select" class="state-select">
                        <option value="unselect">non-slect</option>
                        <!-- Joint options will be dynamically added here -->
                    </select>
                </div>





                <div class="separator-line"></div>
                <div class="default-container">
                    <div id="arrow-default" class="toggle">Arrow (Default)</div>
                    <select id="arrow-default-style" class="state-select">
                        <option value="0">joint_0</option>
                    </select>
                </div>
                <!-- Ê∑ªÂä†ÈöêËóèÁöÑarrow-pointÂÖÉÁ¥†ÔºåÁî®‰∫é‰øÆÂ§çUIÈóÆÈ¢ò -->
                <div class="default-container" style="display:none;">
                    <div id="arrow-point" class="toggle">Arrow (Point)</div>
                    <select id="arrow-point-style" class="state-select">
                        <option value="0">joint_0</option>
                    </select>
                </div>
                <div class="default-container">
                    <div id="arrow-sketch" class="toggle">Arrow (Sketch)</div>
                    <select id="arrow-sketch-style" class="state-select">
                        <option value="0">joint_0</option>
                    </select>
                </div>
                <div class="default-container">
                    <div id="arrow-wireframe" class="toggle">Arrow (Wireframe)</div>
                    <select id="arrow-wireframe-style" class="state-select">
                        <option value="0">joint_0</option>
                    </select>
                </div>
                <div class="container">
                </div>
                <ul></ul>
            </div>
        </div>
        <urdf-viewer up="-Z" display-shadow tabindex="0"></urdf-viewer>

        <script src="./src/index.js"></script>
        <script>
          window.addEventListener('load', async () => {
            const testImage = new Image();
            
            // Á°Æ‰øùËÉåÊôØËâ≤Ê≠£Á°ÆËÆæÁΩÆ
            document.body.style.backgroundColor = '#263238';
            
            // ÊØèÈöî‰∏ÄÁßíÊ£ÄÊü•‰∏ÄÊ¨°ËÉåÊôØËâ≤ÔºåÁ°Æ‰øù‰∏ç‰ºöÂèòÊàêÁôΩËâ≤
            const bgInterval = setInterval(() => {
              const bgColor = document.body.style.backgroundColor;
              if (bgColor === 'white' || bgColor === '#ffffff' || bgColor === 'rgb(255, 255, 255)') {
                console.log('Ê£ÄÊµãÂà∞ÁôΩËâ≤ËÉåÊôØÔºåÈáçÁΩÆ‰∏∫Ê∑±Ëâ≤');
                document.body.style.backgroundColor = '#263238';
              }
            }, 1000);
            
            // 30ÁßíÂêéÂÅúÊ≠¢Ê£ÄÊü•
            setTimeout(() => clearInterval(bgInterval), 30000);
            
            // Ê∑ªÂä†Ë∞ÉËØï‰ª£Á†ÅÔºåÊ£ÄÊü•È°µÈù¢‰∏äÊòØÂê¶Â≠òÂú®arrow-pointÂÖÉÁ¥†
            console.log('DEBUG: arrow-pointÂÖÉÁ¥†Â≠òÂú®Áä∂ÊÄÅ:', !!document.getElementById('arrow-point'));
            console.log('DEBUG: arrow-point-styleÂÖÉÁ¥†Â≠òÂú®Áä∂ÊÄÅ:', !!document.getElementById('arrow-point-style'));
            
            // ÁõëÂê¨È°µÈù¢ÈîôËØØ
            window.addEventListener('error', (event) => {
              console.error('ÊçïËé∑Âà∞JSÈîôËØØ:', event.error);
            });
          });
        </script>
    </body>
</html>